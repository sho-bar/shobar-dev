<?php error_reporting(0); require_once (defined("SMS_CONTROLER_URL")?SMS_CONTROLER_URL:"") .'smsController.php'; require_once (defined("SMS_CONTROLER_URL")?SMS_CONTROLER_URL:"") .'filter.php'; define("MAX_ON_ROW", 10); class ControllerSmsMarketing extends SmsController { public $marketingFilter; private $vf429efc5a59c5e838378c1af65309e5e9550c9de = 0; private $va16b8bee9a5a69d4ec369fae234a70efdd002c24 = false; private $va74439b5a1382238828ba4fcd21ede60406b1de2 = true; private $vf33ca4158e563908a02fc4b099585ef6dd2dae53 = false; private $v4254af43060bcddaeb96069e241cbc65135644e1; private $vccc7124c4929a783f68681205060c9cffb230624 = ""; private $v8820efcd130c520a70ac664fa2c97cc8bee0d7ba = 0; public $timezone = "Europe/Prague"; private $va8a72c03782aa3d2563032e5c3190081b5e2bb49 = ""; private $v39c5d918f8277fd0f183555515a90742d7671938 = -1; public function index() { if(!self::getSession($this, "filter", false)) { self::setSession($this, "filter", null); } if(!self::getSession($this, "disableCustomer", false)) { self::setSession($this, "disableCustomer", array()); } define("SMS_FILTER_ON", true); if(!self::getSession($this, "disableCustomerCount", false)) { self::setSession($this, "disableCustomerCount", 0); } $this->setAjaxPostAction("smsCounter();"); parent::index(); } public function ajaxFilters($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $this->disableScrollUp(); $i5f36398360695c0b1f532643425176d821ccca9belected = $this->marketingFilter->getFilterValues($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["actionVal"]); switch($i5f36398360695c0b1f532643425176d821ccca9belected->type) { case "select": $iaed7c94e74163143b445aaecc1affb41e6fc5961 = self::getSelect(array("name" => "value"), $i5f36398360695c0b1f532643425176d821ccca9belected->data); break; case "input": $iaed7c94e74163143b445aaecc1affb41e6fc5961 = self::getInput(array("name" => "value", "type" => "text")); break; case "datetime": $iaed7c94e74163143b445aaecc1affb41e6fc5961 = self::getInput(array("name" => "value", "class" => "datetimepicker", "type" => "text")) . v_smsmarketing_birthto . self::getInput(array("name" => "value1", "class" => "datetimepicker", "type" => "text")); break; case "relationValue": $iaed7c94e74163143b445aaecc1affb41e6fc5961 = self::getSelect(array("name" => "value", "type" => "text"), array(0 => "<", 1 => ">", 2 => "=", 3 => "≠")) . self::getInput(array("name" => "value1", "type" => "text"));; break; case "allYearsDate": $iaed7c94e74163143b445aaecc1affb41e6fc5961 = v_statistics_day.": ".self::getSelect(array("name" => "value"), $this->generateNumbers(1, 31))." ".v_smshistory_month.": ".self::getSelect(array("name" => "value1"), $this->generateNumbers(1, 12)); break; } if(defined("SMS_CLOSE_SYMBOL")) { $iaed7c94e74163143b445aaecc1affb41e6fc5961 = preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $iaed7c94e74163143b445aaecc1affb41e6fc5961); } $this->sendSnippet("filtervalue", $iaed7c94e74163143b445aaecc1affb41e6fc5961); } public function ajaxClearFilter() { $this->marketingFilter->clearFilter(); $this->sendSnippet("filters", ""); self::setSession($this, "disableCustomer", array()); self::setSession($this, "disableCustomerCount", 0); $this->_okMsg[] = v_filter_been_clear; $this->invalidateSnippets(); } public function ajaxDeleteFilter($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $this->marketingFilter->deleteActiveFilter($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["idFilter"], $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["indexFilter"]); $this->sendSnippet("filters", $this->marketingFilter->getFilterItems()); $this->invalidateSnippets(); } public function ajaxSubmitMarketingFilter($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $this->sendSnippet("filters", $this->marketingFilter->getFilterItems()); $this->invalidateSnippets(); } public function ajaxShowCustomers($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $this->disableScrollUp(); $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b = $this->f086da3d2c353a4f7fe05518e52727eaf00c2d05f(); $this->sendSnippet("popupcontent", $this->f24f65169bdfc785fe36197a98dd272db33a1a073($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b[$iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"]], $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"])); $this->sendSnippet("popuphead", "<img src=\"" . self::$adminCustomerImg . "\" /> " . strtoupper($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"]) . " - " . v_smsmarketing_customersfound . " " . count($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b[$iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"]])); } public function ajaxDeleteCustomer($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $i05355412b857f5174e9a2f71b1e936a86ad60cd237dc36bbacc06272d203b8fd6f3f6e54cdf93a1f = $this->findCustomer($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["customer"]); if($i05355412b857f5174e9a2f71b1e936a86ad60cd237dc36bbacc06272d203b8fd6f3f6e54cdf93a1f == false) { $i37382af536f1c3c02d8000a4b45609a1df80ce1e = self::getSession($this, "disableCustomer", array()); $i37382af536f1c3c02d8000a4b45609a1df80ce1e[mb_substr(strtolower(trim($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["lastname"])), 0, 1, "UTF-8")][] = array("customer_id" => $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["customer"], "firstname" => $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["firstname"], "lastname" => $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["lastname"]); self::setSession($this, "disableCustomer", $i37382af536f1c3c02d8000a4b45609a1df80ce1e); self::incSession($this, "disableCustomerCount"); } else { self::incSession($this, "disableCustomerCount", -1); $i37382af536f1c3c02d8000a4b45609a1df80ce1e = self::getSession($this, "disableCustomer", array()); unset($i37382af536f1c3c02d8000a4b45609a1df80ce1e[$i05355412b857f5174e9a2f71b1e936a86ad60cd237dc36bbacc06272d203b8fd6f3f6e54cdf93a1f["letter"]][$i05355412b857f5174e9a2f71b1e936a86ad60cd237dc36bbacc06272d203b8fd6f3f6e54cdf93a1f["key"]]); if(count($i37382af536f1c3c02d8000a4b45609a1df80ce1e[$i05355412b857f5174e9a2f71b1e936a86ad60cd237dc36bbacc06272d203b8fd6f3f6e54cdf93a1f["letter"]]) == 0) { unset($i37382af536f1c3c02d8000a4b45609a1df80ce1e[$i05355412b857f5174e9a2f71b1e936a86ad60cd237dc36bbacc06272d203b8fd6f3f6e54cdf93a1f["letter"]]); } self::setSession($this, "disableCustomer", $i37382af536f1c3c02d8000a4b45609a1df80ce1e); } if(isset($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"])) { $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b = $this->f086da3d2c353a4f7fe05518e52727eaf00c2d05f(); $this->sendSnippet("popupcontent", $this->f24f65169bdfc785fe36197a98dd272db33a1a073($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b[$iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"]], $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"])); $this->sendSnippet("popuphead", "<img src=\"" . self::$adminCustomerImg . "\" /> " . strtolower($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"]) . " - " . v_smsmarketing_customersfound . " " . count($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b[$iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["letter"]])); } $this->invalidateSnippets(); } public function ajaxSaveFilter() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_filter_save); $this->sendSnippet("popupcontent", $this->fb9e19de745653a5a6dc1099f180d9c8d277f4d0c()); } public function ajaxLoadFilter() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_filter_load); $this->sendSnippet("popupcontent", $this->fb9e19de745653a5a6dc1099f180d9c8d277f4d0c(false)); } public function ajaxRestoreFilter($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_marketing_filter` WHERE `id` = '" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["filter"]) . "'"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $i698e6f64ca4934e15ff68883b32c0e3ae044df24 = self::getSession($this, "filter", null); if(!is_a($i698e6f64ca4934e15ff68883b32c0e3ae044df24, "activeFilter")) { $i698e6f64ca4934e15ff68883b32c0e3ae044df24 = new activeFilter($this->marketingFilter); } $i27c126497b4d7328343e141aa017829cb679381d = unserialize($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["filter"]); $i698e6f64ca4934e15ff68883b32c0e3ae044df24->setData($i27c126497b4d7328343e141aa017829cb679381d->data); self::setSession($this, "filter", $i698e6f64ca4934e15ff68883b32c0e3ae044df24); self::setSession($this, "disableCustomer", unserialize($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["disabled"])); self::setSession($this, "disableCustomerCount", $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["disabled_counter"]); } } $this->sendSnippet("filters", $this->marketingFilter->getFilterItems()); $this->_okMsg[] = v_filter_been_apply; $this->invalidateSnippets(); } public function ajaxDeleteSaveFilter($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $this->disableScrollUp(); $this->Execute("DELETE FROM `" . DB_PREFIX . "sp_marketing_filter` WHERE `id` = '" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["filter"]) . "'"); $this->sendSnippet("popupcontent", $this->fb9e19de745653a5a6dc1099f180d9c8d277f4d0c(false)); } public function ajaxSaveTemplate() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_template_save); $this->sendSnippet("popupcontent", $this->f473f9812f802efbdb2dc40177774120ea42ffde3()); } public function ajaxLoadTemplate() { $this->disableScrollUp(); $this->sendSnippet("popuphead", v_template_load); $this->sendSnippet("popupcontent", $this->f473f9812f802efbdb2dc40177774120ea42ffde3(false)); } public function ajaxDeleteSaveTemplate($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $this->disableScrollUp(); $this->Execute("DELETE FROM `" . DB_PREFIX . "sp_template` WHERE `id` = '" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["template"]) . "'"); $this->sendSnippet("popupcontent", $this->f473f9812f802efbdb2dc40177774120ea42ffde3(false)); } public function ajaxRestoreTemplate($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_template` WHERE `id` = '" . $this->escape($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89["template"]) . "'"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $this->sendSnippet("textarea", self::getTextArea(array("name" => "text", "onchange" => "smsCounter()", "onkeyup" => "smsCounter()", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsText"), $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->row["template"])); $this->sendSnippet("unicode", self::getInput(array("type" => "checkbox", "onchange" => "smsCounter()", "id" => "unicode", "name" => "unicode", "value" => 1), $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->row["unicode"]) . ' ' . v_smsmarketing_unicode . ' ' . self::getHint(v_smsmarketing_unicodetext)); $this->sendSnippet("unique", self::getInput(array("type" => "checkbox", "id" => "unique", "name" => "unique", "value" => 1), $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->row["unique"]) . ' ' . v_remove_duplicate); $this->_okMsg[] = v_template_been_apply; } } public function findCustomer($i14c32e4e283c09b15311b7807f8da704474d8fee) { $i348b3c036799a3b7d57937394aa170aadb572af6 = self::getSession($this, "disableCustomer", array()); foreach($i348b3c036799a3b7d57937394aa170aadb572af6 as $i05355412b857f5174e9a2f71b1e936a86ad60cd2c639deb1191e3d6ff2b9a324d05ee024b0281fe5 => $i05355412b857f5174e9a2f71b1e936a86ad60cd2b584f54a0be935f7ee8332f9a65155eb2870a7be) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2b584f54a0be935f7ee8332f9a65155eb2870a7be as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395) { if($i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395["customer_id"] == $i14c32e4e283c09b15311b7807f8da704474d8fee) { return array("letter" => $i05355412b857f5174e9a2f71b1e936a86ad60cd2c639deb1191e3d6ff2b9a324d05ee024b0281fe5, "key" => $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4); } } } return false; } public function invalidateSnippets() { $this->disableScrollUp(); $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b = $this->f086da3d2c353a4f7fe05518e52727eaf00c2d05f(); $this->sendSnippet("customers", $this->f2461e80cd4ff7e93c5425c57c37c7b2e5f9bab29($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b)); $this->sendSnippet("countup", $this->v8820efcd130c520a70ac664fa2c97cc8bee0d7ba); $this->sendSnippet("countdown", $this->v8820efcd130c520a70ac664fa2c97cc8bee0d7ba); $this->sendSnippet("disableCounter", self::getSession($this, "disableCustomerCount", 0)); $this->sendSnippet("disabledcustomers", $this->f2461e80cd4ff7e93c5425c57c37c7b2e5f9bab29(self::getSession($this, "disableCustomer", array()), "#990000", false)); } public function display() { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = parent::display(); $if429efc5a59c5e838378c1af65309e5e9550c9de = $this->getTimezoneSettings(); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= $this->getTemplateRepalce(); $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b = $this->f086da3d2c353a4f7fe05518e52727eaf00c2d05f(); $i84bc545bbb2cff247d6ae6400af05eeb443267d9 = $this->getCoupons(); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <script type="text/javascript"> var imgPath = "' . DIR_SMS_IMG . '"; var v_smsmarketing_longtext = "' . v_smsmarketing_longtext . '"; var v_smsmarketing_jstotalcustomers = "' . v_smsmarketing_jstotalcustomers . '"; var v_smsmarketing_jstotalsms = "' . v_smsmarketing_jstotalsms . '"; var v_smsmarketing_jschars = "' . v_smsmarketing_jschars . '"; var v_smsanswers_sms = "' . v_smsanswers_sms . '"; </script> '; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'sms.js"></script>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= '<script type="text/javascript" src="' . DIR_SMS_JS . 'jquery.at.caret.min.js"></script>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= Html::header(v_smsmarketing_smsmarketingfound . Html::snippet("countup", $this->v8820efcd130c520a70ac664fa2c97cc8bee0d7ba), 2) . Html::p(v_smsmarketing_description); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <fieldset> ' . Html::legend(Html::img(array("src" => self::$setingsImg)) . " " . v_smsmarketing_smsbulk . "<span class=\"right\"><a href=\"" .$this->smsLinkSaveMarketingTemplate(). "\" class=\"ajax\" onclick=\"showPopup();\">[" . v_template_save . "]</a> <a href=\"".$this->smsLinkSavedMarketingTemplate()."\" class=\"ajax\" onclick=\"showPopup();\">[" . v_template_load . "]</a></span>") . ' <form name="formSMS" action="" method="post"> <table class="formTableSend"> <tbody> <tr> <td>' . v_smsmarketing_entertext . ':</td> <td>' . v_adminsms_preview . ': <span id="labelSMS" class="note s12 right"></span></td> <td></td> </tr> <tr> <td rowspan=4 class="sendTextArea" id="snippet-textarea">' . self::getTextArea(array("name" => "text", "onchange" => "smsCounter()", "onkeyup" => "smsCounter()", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsText"), $this->vccc7124c4929a783f68681205060c9cffb230624) . '</td> <td rowspan=4 class="sendTextArea">' . self::getTextArea(array("name" => "preview", "rows" => 12, "cols" => 60, "class" => "left", "id" => "smsPreview", "disabled" => "disabled")) . '</td> <td id="snippet-unicode">' . self::getInput(array("type" => "checkbox", "onchange" => "smsCounter()", "id" => "unicode", "name" => "unicode", "value" => 1), $this->va16b8bee9a5a69d4ec369fae234a70efdd002c24) . ' ' . v_smsmarketing_unicode . ' ' . self::getHint(v_smsmarketing_unicodetext) . '</td> </tr> <tr> <td id="snippet-unique">' . self::getInput(array("type" => "checkbox", "id" => "unique", "name" => "unique", "value" => 1), $this->va74439b5a1382238828ba4fcd21ede60406b1de2) . ' ' . v_remove_duplicate . '</td> </tr> <tr> <td>' . self::getInput(array("type" => "checkbox", "id" => "sendlater", "name" => "sendlater", "value" => 1, "onclick" => "jQuery('.sendLater').toggleClass('invisibility');"), $this->vf33ca4158e563908a02fc4b099585ef6dd2dae53) . ' ' . v_smsmarketing_sendlater . '</td> </tr> <tr> <td> <table class="sendLater ' . (($this->vf33ca4158e563908a02fc4b099585ef6dd2dae53 == 1) ? ("") : ("invisibility")) . '"> <tr> <td>' . v_smsmarketing_date . '</td> <td>' . self::getInput(array("type" => "text", "id" => "datetimepicker", "class" => "datetime", "name" => "laterdate")) . '</td> </tr> <tr> <td>' . v_smsmarketing_yourtime . '</td> <td>' . self::getSelect(array("name" => "datereal"), array(-1 => $if429efc5a59c5e838378c1af65309e5e9550c9de . " -" . v_smsmarketing_hr, 0 => $if429efc5a59c5e838378c1af65309e5e9550c9de, 1 => $if429efc5a59c5e838378c1af65309e5e9550c9de . " +" . v_smsmarketing_hr), $this->vf429efc5a59c5e838378c1af65309e5e9550c9de) . '</td> </tr> <tr> <td></td> <td>(' . v_smsmarketing_timezone . '<a href="' . $this->smsLinkTimezone() . '">' . $this->timezone . '</a>)</td> </tr> </table> </td> </tr> <tr> <td colspan="2"><p>' . v_smsprestashop_notice . '<p/> <p>' . $this->getTags(self::$MarketingTemplateCustomers) . "<br/>" . $this->getTags(self::$MarketingTemplateShop) . '<p/> ' . $this->getCouponForm($i84bc545bbb2cff247d6ae6400af05eeb443267d9, $this->v39c5d918f8277fd0f183555515a90742d7671938) . ' </td> <td class="bottom">' . self::getInput(array("type" => "submit", "name" => "submitSend", "value" => v_smsmarketing_send, "class" => "button", "onclick" => "return confirmSend('" . v_smsmarketing_send . "', '" . v_smsanswers_sms . "');")) . '</td> </tr> </tbody> </table> </form> </fieldset> '; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <fieldset> <legend><img src="' . self::$setingsImg . '" alt="' . v_smsmarketing_bulkfilter . '" /> ' . v_smsmarketing_bulkfilter . ' <span class="right"> <a href="'.$this->smsLinkClearFilter().'" class="ajax" data-confirm="' . v_filter_q_clear . '">[' . v_filter_clear . ']</a> <a href="'.$this->smsLinkSaveFilter(). '" class="ajax" onclick="showPopup();">[' . v_filter_save . ']</a> <a href="'.$this->smsLinkLoadFilter(). '" class="ajax" onclick="showPopup();">[' . v_filter_load . ']</a> </span> </legend> <p id="snippet-filters">' . $this->marketingFilter->getFilterItems() . '</p> <form name="filterSms" action="" method="post" class="ajax hoverForm"> <table> <tr> <td class="w220">' . self::getSelect(array("name" => "filters", "id" => "filters", "onchange" => "sendAjax('filters', '" .$this->smsLinkAddFilter(). "')"), $this->marketingFilter->getFilters()) . '</td> <td class="mw20"><span id="snippet-filtervalue"></span></td> <td> ' . self::getInput(array("name" => "submitMarketingFilter", "type" => "submit", "value" => v_smsmarketing_applyfilter)) . ' </td> </tr> </table> </form> </fieldset> '; $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a733956a6e4d3adab7c8636aa9c497ae8a6be3e5 = $this->getStore(false); $i7e5f024041147a09eae3299d15562905c524cbaf = ""; if(isset($i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a733956a6e4d3adab7c8636aa9c497ae8a6be3e5) && count($i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a733956a6e4d3adab7c8636aa9c497ae8a6be3e5) > 1) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a733956a6e4d3adab7c8636aa9c497ae8a6be3e5 as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe) { $i7e5f024041147a09eae3299d15562905c524cbaf .= " <span class=\"badge\" style=\"background-color:" . self::$colors[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4%9] . ";\">" . htmlspecialchars($i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe) . "</span>"; } } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .=' <fieldset> <legend><img src="' . self::$catalogImg . '" alt="" /> ' . v_smsmarketing_customersfound . '<span id="snippet-countdown">' . $this->v8820efcd130c520a70ac664fa2c97cc8bee0d7ba . '</span><span class="right">' . $i7e5f024041147a09eae3299d15562905c524cbaf . '</span></legend> <div id="snippet-customers">' . $this->f2461e80cd4ff7e93c5425c57c37c7b2e5f9bab29($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b) . '</div> </fieldset>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .=' <fieldset> <legend><img src="' . self::$catalogImg . '" alt="" /> ' . v_filter_deleted_customers . '<span id="snippet-disableCounter">' . self::getSession($this, "disableCustomerCount", array()) . '</span></legend> <div id="snippet-disabledcustomers">' . $this->f2461e80cd4ff7e93c5425c57c37c7b2e5f9bab29(self::getSession($this, "disableCustomer", array()), "#990000", false).'</div> </fieldset>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2738fb66ac1450318a6afd838e3ce268b59e35f75 = new DateTime($this->v4254af43060bcddaeb96069e241cbc65135644e1); $i05355412b857f5174e9a2f71b1e936a86ad60cd2738fb66ac1450318a6afd838e3ce268b59e35f75->setTimezone(new DateTimeZone($this->timezone)); if(defined("SMS_CLOSE_SYMBOL")) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2f4a22975defb18dcde9f11b9d3783f045bc15a73 = SMS_CLOSE_SYMBOL; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2f4a22975defb18dcde9f11b9d3783f045bc15a73 = "×"; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= '<div id="popup">' . '<p class="popuphead"><span id="snippet-popuphead"></span><span class="close right" onclick="showPopup();">'.$i05355412b857f5174e9a2f71b1e936a86ad60cd2f4a22975defb18dcde9f11b9d3783f045bc15a73.'</span></p>' . '<div class="popupcontent"><p id="snippet-popupcontent"></p></div></div>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= '<div id="popupbackground"></div>'; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getAjaxLoader("submitSend", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getAjaxLoader("submitMarketingFilter", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getAjaxLoader("deleteFilter", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getAjaxLoader("deleteCustomer", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getAjaxLoader("clearFilter", "<div id=\"smsloader\"><h3>" . v_send_busy . "</h3><br/><img src=\"" . self::$busy . "\" /></div><div id=\"smsloaderbackground\"></div>"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= " <script type=\"text/javascript\"> jQuery('#datetimepicker').datetimepicker({ lang:'" . lang_iso_code . "', value:'" . $i05355412b857f5174e9a2f71b1e936a86ad60cd2738fb66ac1450318a6afd838e3ce268b59e35f75->format("Y-m-d H:i") . "' }); smsCounter(); toggleCouponVariables(); </script> "; return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } public function postProcess($icddcd508600972f2dab78cd14f7612aa4dc19a18 = NULL, $i6b496fee24729ce6f7683ba88d5a87d6130049b5 = NULL, $ifab26c5df1e4ac29b64e0a4796b1f9165fe614a8 = NULL) { if($icddcd508600972f2dab78cd14f7612aa4dc19a18 == NULL && $i6b496fee24729ce6f7683ba88d5a87d6130049b5 == NULL) { return self::POST_ERROR; } if(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18["submitMarketingFilter"])) { $icddcd508600972f2dab78cd14f7612aa4dc19a18 = $this->escapeInput($icddcd508600972f2dab78cd14f7612aa4dc19a18); $i5f36398360695c0b1f532643425176d821ccca9b = $this->escapePostVariables("filters", null); $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe = $this->escape(filter_input(INPUT_POST, "value")); $i05355412b857f5174e9a2f71b1e936a86ad60cd234d4b21d96ab40e69d3c24e2a07cc9893cac4397 = $this->escape(filter_input(INPUT_POST, "value1")); if($i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe == -1) { return self::POST_ERROR; } if($i05355412b857f5174e9a2f71b1e936a86ad60cd234d4b21d96ab40e69d3c24e2a07cc9893cac4397 != null) { $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe = array(0 => $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe, 1 => $i05355412b857f5174e9a2f71b1e936a86ad60cd234d4b21d96ab40e69d3c24e2a07cc9893cac4397); } $this->marketingFilter->selectedFilterAdd($i5f36398360695c0b1f532643425176d821ccca9b, $i05355412b857f5174e9a2f71b1e936a86ad60cd20e4db502c191d65f4204e889a1aff420bded9efe); return self::POST_OK; } elseif(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18["submitSend"])) { $this->va16b8bee9a5a69d4ec369fae234a70efdd002c24 = $this->escapePostVariables("unicode"); $this->va74439b5a1382238828ba4fcd21ede60406b1de2 = $this->escapePostVariables("unique"); $this->vf33ca4158e563908a02fc4b099585ef6dd2dae53 = $this->escapePostVariables("sendlater"); $this->v4254af43060bcddaeb96069e241cbc65135644e1 = $this->escapePostVariables("laterdate"); $this->vccc7124c4929a783f68681205060c9cffb230624 = $this->escapePostVariables("text"); $this->vf429efc5a59c5e838378c1af65309e5e9550c9de = $this->escapePostVariables("datereal"); $this->v39c5d918f8277fd0f183555515a90742d7671938 = $this->escapePostVariables("coupon"); $i05355412b857f5174e9a2f71b1e936a86ad60cd29110e9381bd52d5eb5c5fe59bf358843f431b8ee = $this->f086da3d2c353a4f7fe05518e52727eaf00c2d05f(); if($this->v39c5d918f8277fd0f183555515a90742d7671938 != -1) { $this->vccc7124c4929a783f68681205060c9cffb230624 = $this->applyTemplate($this->getCouponData($this->v39c5d918f8277fd0f183555515a90742d7671938), $this->vccc7124c4929a783f68681205060c9cffb230624, self::$MarketingTemplateCoupons); } $i05355412b857f5174e9a2f71b1e936a86ad60cd29110e9381bd52d5eb5c5fe59bf358843f431b8ee = $this->fd2ee65891c4386a5f126bb070dd5fda5a3067a43($i05355412b857f5174e9a2f71b1e936a86ad60cd29110e9381bd52d5eb5c5fe59bf358843f431b8ee, $this->vccc7124c4929a783f68681205060c9cffb230624); $i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a = new SmsModel($this->getDb(), SmsModel::TYPE_MARKETING, SmsModel::SMS_CTYPE_CUSTOMER, SmsModel::SMS_BULK_DTEXT); if($this->va16b8bee9a5a69d4ec369fae234a70efdd002c24) { $i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->unicode(); } if($this->va74439b5a1382238828ba4fcd21ede60406b1de2) { $i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->unique(); } if($this->vf33ca4158e563908a02fc4b099585ef6dd2dae53) { $this->getTimezoneSettings(); $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a9fa4635372c4216f6d8a98e38c0b7d89c775790 = new DateTime($this->v4254af43060bcddaeb96069e241cbc65135644e1); $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a9fa4635372c4216f6d8a98e38c0b7d89c775790->setTimezone(new DateTimeZone($this->timezone)); $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a9fa4635372c4216f6d8a98e38c0b7d89c775790->modify($this->vf429efc5a59c5e838378c1af65309e5e9550c9de . " hour"); $i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->sendLater($i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a9fa4635372c4216f6d8a98e38c0b7d89c775790); } $i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->number($i05355412b857f5174e9a2f71b1e936a86ad60cd29110e9381bd52d5eb5c5fe59bf358843f431b8ee)->text($this->vccc7124c4929a783f68681205060c9cffb230624)->send(); if($i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->isError()) { $this->_errors = array_unique($i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->getErrors()); return self::POST_ERROR; } else { $this->marketingFilter->clearFilter(); $this->_okMsg = array_unique($i05355412b857f5174e9a2f71b1e936a86ad60cd24367816f1ae76ddc44b3953c9ce6460e181a0a3a->getConfirm()); return self::POST_OK; } } elseif(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18["saveFilter"])) { $this->va8a72c03782aa3d2563032e5c3190081b5e2bb49 = $this->escapePostVariables("saveName"); $this->Execute("INSERT INTO `" . DB_PREFIX . "sp_marketing_filter` (`name`, `filter`, `disabled`, `disabled_counter`, `date`) VALUES ('" . $this->escape($this->va8a72c03782aa3d2563032e5c3190081b5e2bb49) . "', '" . $this->escape(SmsFilter::returnAllFilter(null, $this)) . "', '" . $this->escape(serialize(self::getSession($this, "disableCustomer"))) . "', '" . self::getSession($this, "disableCustomerCount", 0) . "', NOW());"); $this->_okMsg[] = v_filter_been_saved; return self::POST_OK; } elseif(isset($icddcd508600972f2dab78cd14f7612aa4dc19a18["saveTemplate"])) { $this->va8a72c03782aa3d2563032e5c3190081b5e2bb49 = $this->escapePostVariables("saveName"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624 = $this->escapePostVariables("saveText"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24 = $this->escapePostVariables("saveUnicode"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2a74439b5a1382238828ba4fcd21ede60406b1de2 = $this->escapePostVariables("saveUnique"); $i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24 = ($i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24 == "true") ? 1 : 0; $i05355412b857f5174e9a2f71b1e936a86ad60cd2a74439b5a1382238828ba4fcd21ede60406b1de2 = ($i05355412b857f5174e9a2f71b1e936a86ad60cd2a74439b5a1382238828ba4fcd21ede60406b1de2 == "true") ? 1 : 0; $this->Execute("INSERT INTO `" . DB_PREFIX . "sp_template` (`name`, `template`, `unicode`, `unique`, `date`, `type`) VALUES ('" . $this->escape($this->va8a72c03782aa3d2563032e5c3190081b5e2bb49) . "', '" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624) . "', '" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd2a16b8bee9a5a69d4ec369fae234a70efdd002c24) . "', '" . $this->escape($i05355412b857f5174e9a2f71b1e936a86ad60cd2a74439b5a1382238828ba4fcd21ede60406b1de2) . "', NOW(), '0')"); $this->_okMsg[] = v_template_been_saved; return self::POST_OK; } return self::POST_ERROR; } private function f3ac177504ac10c20ec8a7ae98f2414a2bfc7fcc6($i05355412b857f5174e9a2f71b1e936a86ad60cd2a791e8bb89d35f9a19794c26969b9662534b7788, $i47945e993004c137f2a9e8ebe8c6a37da82bbd94) { for($i05355412b857f5174e9a2f71b1e936a86ad60cd2 = 0; $i05355412b857f5174e9a2f71b1e936a86ad60cd2 < count($i47945e993004c137f2a9e8ebe8c6a37da82bbd94); $i05355412b857f5174e9a2f71b1e936a86ad60cd2++) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2a791e8bb89d35f9a19794c26969b9662534b7788 = str_replace("{" . $i05355412b857f5174e9a2f71b1e936a86ad60cd2 . "}", $i47945e993004c137f2a9e8ebe8c6a37da82bbd94[$i05355412b857f5174e9a2f71b1e936a86ad60cd2], $i05355412b857f5174e9a2f71b1e936a86ad60cd2a791e8bb89d35f9a19794c26969b9662534b7788); } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2a791e8bb89d35f9a19794c26969b9662534b7788; } private function f19a0a5bb4a2c8582d20836614deb81a91736618e($i05355412b857f5174e9a2f71b1e936a86ad60cd23e3b51011064cfe2b8198886d2a5c0fe6febe1b3, $i1c935e77973f359446ebeec178b9049130734c99 = "customer_id") { $i05355412b857f5174e9a2f71b1e936a86ad60cd2193eefa5e522547dd5eca78ae6b3dc7f097cd5ed = null; foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd23e3b51011064cfe2b8198886d2a5c0fe6febe1b3 as $i05355412b857f5174e9a2f71b1e936a86ad60cd2ed9fe35945e2a10238c6823206428d26670fd739) { $i05355412b857f5174e9a2f71b1e936a86ad60cd275741dfb305595d3192b7938c1bde74265f98841 = array(); foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2ed9fe35945e2a10238c6823206428d26670fd739 as $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb) { $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b = array(); $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute($i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b[] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952[$i1c935e77973f359446ebeec178b9049130734c99]; } } $i05355412b857f5174e9a2f71b1e936a86ad60cd275741dfb305595d3192b7938c1bde74265f98841 = array_unique(array_merge((array)$i05355412b857f5174e9a2f71b1e936a86ad60cd275741dfb305595d3192b7938c1bde74265f98841, (array)$ia3360b1b48a7cac1d104aec9ddf895f71b878d9b)); } if(is_array($i05355412b857f5174e9a2f71b1e936a86ad60cd2193eefa5e522547dd5eca78ae6b3dc7f097cd5ed)) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2193eefa5e522547dd5eca78ae6b3dc7f097cd5ed = array_intersect($i05355412b857f5174e9a2f71b1e936a86ad60cd2193eefa5e522547dd5eca78ae6b3dc7f097cd5ed, $i05355412b857f5174e9a2f71b1e936a86ad60cd275741dfb305595d3192b7938c1bde74265f98841); } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2193eefa5e522547dd5eca78ae6b3dc7f097cd5ed = $i05355412b857f5174e9a2f71b1e936a86ad60cd275741dfb305595d3192b7938c1bde74265f98841; } } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2193eefa5e522547dd5eca78ae6b3dc7f097cd5ed; } private function fdc21db2e44da94b7f1594bb9be9152df5195c0d9($i698e6f64ca4934e15ff68883b32c0e3ae044df24) { $i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d = array(); if(isset($i698e6f64ca4934e15ff68883b32c0e3ae044df24->data) && is_array($i698e6f64ca4934e15ff68883b32c0e3ae044df24->data)) { foreach($i698e6f64ca4934e15ff68883b32c0e3ae044df24->data as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395) { $i05355412b857f5174e9a2f71b1e936a86ad60cd235cd66c28f1780c4b3032520a7ddea2017350adf = $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395->getValues(); foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd235cd66c28f1780c4b3032520a7ddea2017350adf as $i05355412b857f5174e9a2f71b1e936a86ad60cd2) { if(is_array($this->marketingFilter->definition[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]->sql)) { foreach($this->marketingFilter->definition[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]->sql as $i578a9e90a925952a8c5474213f09612622fa35be => $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb) { if(!is_array($i05355412b857f5174e9a2f71b1e936a86ad60cd2)) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2 = array($i05355412b857f5174e9a2f71b1e936a86ad60cd2); } eval($this->f3ac177504ac10c20ec8a7ae98f2414a2bfc7fcc6($i578a9e90a925952a8c5474213f09612622fa35be, $i05355412b857f5174e9a2f71b1e936a86ad60cd2)); if(isset($eval) && $eval) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2 as $i05355412b857f5174e9a2f71b1e936a86ad60cd23605abc601d38661304c8dcaae61344934e737b9 => $i05355412b857f5174e9a2f71b1e936a86ad60cd2ac7338fa6e265d135828e1c7cb66296699ef55f5) { $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb = str_replace("{" . $i05355412b857f5174e9a2f71b1e936a86ad60cd23605abc601d38661304c8dcaae61344934e737b9 . "}", $i05355412b857f5174e9a2f71b1e936a86ad60cd2ac7338fa6e265d135828e1c7cb66296699ef55f5, $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb); } $i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4][] = $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb; } } } else { if(is_array($i05355412b857f5174e9a2f71b1e936a86ad60cd2)) { $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb = $this->marketingFilter->definition[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]->sql; foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2 as $i05355412b857f5174e9a2f71b1e936a86ad60cd23605abc601d38661304c8dcaae61344934e737b9 => $i05355412b857f5174e9a2f71b1e936a86ad60cd2ac7338fa6e265d135828e1c7cb66296699ef55f5) { $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb = str_replace("{" . $i05355412b857f5174e9a2f71b1e936a86ad60cd23605abc601d38661304c8dcaae61344934e737b9 . "}", $i05355412b857f5174e9a2f71b1e936a86ad60cd2ac7338fa6e265d135828e1c7cb66296699ef55f5, $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb); } $i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4][] = $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb = $this->marketingFilter->definition[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4]->sql; $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb = str_replace("{0}", $i05355412b857f5174e9a2f71b1e936a86ad60cd2, $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb); $i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4][] = $i05355412b857f5174e9a2f71b1e936a86ad60cd25219ccda793bda0dd2dd47ede46789ad8051decb; } } } } } return $i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d; } private function f086da3d2c353a4f7fe05518e52727eaf00c2d05f() { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = array(); $ie41b869258663f171bb31e8de30b1d0acdd3f20e = $i59353ed91761a953be973155708ab9fe00e5043d = " "; $i698e6f64ca4934e15ff68883b32c0e3ae044df24 = self::getSession($this, "filter"); $i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d = $this->fdc21db2e44da94b7f1594bb9be9152df5195c0d9($i698e6f64ca4934e15ff68883b32c0e3ae044df24); if(isset($i698e6f64ca4934e15ff68883b32c0e3ae044df24->data) && count($i698e6f64ca4934e15ff68883b32c0e3ae044df24->data)) { $i59353ed91761a953be973155708ab9fe00e5043d = " AND 1=2"; } $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b = $this->f19a0a5bb4a2c8582d20836614deb81a91736618e($i05355412b857f5174e9a2f71b1e936a86ad60cd216dccd103ee3e9df2ad5466a9b625a343392251d); $icfd655df99dec5caa756845d6b66b8984060e568 = count($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b); if($icfd655df99dec5caa756845d6b66b8984060e568) { $i59353ed91761a953be973155708ab9fe00e5043d = $this->getMarketingFilteredSQL($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b); } $i37382af536f1c3c02d8000a4b45609a1df80ce1e = self::getSession($this, "disableCustomer", array()); if(count($i37382af536f1c3c02d8000a4b45609a1df80ce1e) && is_array($i37382af536f1c3c02d8000a4b45609a1df80ce1e) && count($i37382af536f1c3c02d8000a4b45609a1df80ce1e) > 0) { $if2c1a4a5b60f863cf8af9496cf4c7fd2ac66c47f = array(); foreach($i37382af536f1c3c02d8000a4b45609a1df80ce1e as $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395 as $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a) { $if2c1a4a5b60f863cf8af9496cf4c7fd2ac66c47f[] = $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a["customer_id"]; } } $ie41b869258663f171bb31e8de30b1d0acdd3f20e = $this->getMarketingDisabledSQL($if2c1a4a5b60f863cf8af9496cf4c7fd2ac66c47f); } $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute($this->getMarketingCustomerSQL($i59353ed91761a953be973155708ab9fe00e5043d, $ie41b869258663f171bb31e8de30b1d0acdd3f20e)); $this->v8820efcd130c520a70ac664fa2c97cc8bee0d7ba = $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows; if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89[mb_substr(strtolower(trim($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["lastname"])), 0, 1, "UTF-8")][] = $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952; } } return $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89; } private function fd2ee65891c4386a5f126bb070dd5fda5a3067a43($i49a9499fcce9e9ae1b033270b04b5ddb67d38636, $i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624 = "") { $iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 = $this->getStore(false); foreach($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a733956a6e4d3adab7c8636aa9c497ae8a6be3e5[$i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4] = $this->getShopVariables($i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4); } if(count($i49a9499fcce9e9ae1b033270b04b5ddb67d38636) > 0) { foreach($i49a9499fcce9e9ae1b033270b04b5ddb67d38636 as $ib4ecbd87aa29378700d281168018bf21a12b3e4a) { foreach($ib4ecbd87aa29378700d281168018bf21a12b3e4a as $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395) { $i05355412b857f5174e9a2f71b1e936a86ad60cd234719ae282efb3f8569ac508af85dbe83544d569 = $this->applyTemplate($i05355412b857f5174e9a2f71b1e936a86ad60cd287395dcafb6eb7221410dbcd87e9e8ce0007214a733956a6e4d3adab7c8636aa9c497ae8a6be3e5[$i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395["store_id"]], $i05355412b857f5174e9a2f71b1e936a86ad60cd2ccc7124c4929a783f68681205060c9cffb230624, self::$MarketingTemplateShop); $i05355412b857f5174e9a2f71b1e936a86ad60cd234719ae282efb3f8569ac508af85dbe83544d569 = $this->applyTemplate($i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395, $i05355412b857f5174e9a2f71b1e936a86ad60cd234719ae282efb3f8569ac508af85dbe83544d569, self::$MarketingTemplateCustomers); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8[] = array( SmsModel::NUMBER_MOBILE => $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395["telephone"], SmsModel::NUMBER_CUSTOMER => $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395["customer_id"], SmsModel::NUMBER_ADMIN => 0, SmsModel::NUMBER_COUNTRY => $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395["country_id"], SmsModel::NUMBER_CITY => $i05355412b857f5174e9a2f71b1e936a86ad60cd2e10f888510a016f5ea5f46b736afa9e60fb62395["city"], SmsModel::NUMBER_TEXT => $i05355412b857f5174e9a2f71b1e936a86ad60cd234719ae282efb3f8569ac508af85dbe83544d569 ); } } } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = array(); } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } private function f2461e80cd4ff7e93c5425c57c37c7b2e5f9bab29($i49a9499fcce9e9ae1b033270b04b5ddb67d38636 = array(), $i50b149dc4b023d21aa5c84b935fdbc37c5c77a95 = null, $i05355412b857f5174e9a2f71b1e936a86ad60cd20f8a2c975da85ef5e4ceb7f00cff85de75ce08ea = true) { ksort($i49a9499fcce9e9ae1b033270b04b5ddb67d38636); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; if(defined("SMS_CLOSE_SYMBOL")) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2f4a22975defb18dcde9f11b9d3783f045bc15a73 = SMS_CLOSE_SYMBOL; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2f4a22975defb18dcde9f11b9d3783f045bc15a73 = "×"; } if(count($i49a9499fcce9e9ae1b033270b04b5ddb67d38636) > 0) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<table class=\"resultTable\">"; foreach($i49a9499fcce9e9ae1b033270b04b5ddb67d38636 as $i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4 => $ia3360b1b48a7cac1d104aec9ddf895f71b878d9b) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<tr " . self::isEven($i05355412b857f5174e9a2f71b1e936a86ad60cd2f3b517d335a2b4ef26a37d2656c41c234b2a734a, "even") . ">"; $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<td class=\"w20 center\"><span class=\"bigLetter\">" . mb_strtoupper($i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4, "UTF-8") . "</span></td><td>"; $i84676540daef1510ea5729a183290848a9e7accb = 1; $i0c6b957a0ca7e5fa68bfdc4bfd17c2496eb4e6c5 = false; foreach($ia3360b1b48a7cac1d104aec9ddf895f71b878d9b as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { if($i05355412b857f5174e9a2f71b1e936a86ad60cd20f8a2c975da85ef5e4ceb7f00cff85de75ce08ea && $i84676540daef1510ea5729a183290848a9e7accb == MAX_ON_ROW + 1) { $i0c6b957a0ca7e5fa68bfdc4bfd17c2496eb4e6c5 = true; break; } else { if(!isset($i50b149dc4b023d21aa5c84b935fdbc37c5c77a95) && isset($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["store_id"])) { if(isset(self::$colors[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["store_id"]%9])) { $i1bb7fc7c25016b731b6999b6606facccd35eb38b = self::$colors[$i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["store_id"]%9]; } } else { $i1bb7fc7c25016b731b6999b6606facccd35eb38b = $i50b149dc4b023d21aa5c84b935fdbc37c5c77a95; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2171ccdcadfb0f10d2c34fb74f93d195776344f9e = $this->smsLinkCustomer($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['customer_id']); $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <span class="badge" ' . ((isset($i1bb7fc7c25016b731b6999b6606facccd35eb38b)) ? 'style="background-color: ' . $i1bb7fc7c25016b731b6999b6606facccd35eb38b . '"' : '') . '><a href="' . $i05355412b857f5174e9a2f71b1e936a86ad60cd2171ccdcadfb0f10d2c34fb74f93d195776344f9e . '">' . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['lastname'] . ' ' . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['firstname'] . '</a><a class="delete ajax" href="' .$this->smsLinkRemoveCustomerList($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['customer_id'], $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['firstname'], $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['lastname']). '">'.$i05355412b857f5174e9a2f71b1e936a86ad60cd2f4a22975defb18dcde9f11b9d3783f045bc15a73.'</a></span>'; $i84676540daef1510ea5729a183290848a9e7accb++; } } if($i05355412b857f5174e9a2f71b1e936a86ad60cd20f8a2c975da85ef5e4ceb7f00cff85de75ce08ea && $i0c6b957a0ca7e5fa68bfdc4bfd17c2496eb4e6c5) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .=' <span class="badge"><a class="ajax" href="' . $this->smsLinkMarketingMore($i05355412b857f5174e9a2f71b1e936a86ad60cd27baa31be52215025da340cfec29600d8d2b327c4) . '" onclick="showPopup();">' . v_filter_more . '</a></span>'; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "</td></tr>"; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "</table>"; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<strong>" . v_smsmarketing_customersfound . " 0</strong>"; } if(defined("SMS_CLOSE_SYMBOL")) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8); } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } private function f24f65169bdfc785fe36197a98dd272db33a1a073($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89, $i05355412b857f5174e9a2f71b1e936a86ad60cd2b584f54a0be935f7ee8332f9a65155eb2870a7be) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; if(count($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89)) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<table class=\"resultTable\">"; foreach($iced8cbcfca3c880f0f157e119d1cc6f8691e7e89 as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<tr " . self::isEven($i05355412b857f5174e9a2f71b1e936a86ad60cd2f3b517d335a2b4ef26a37d2656c41c234b2a734a, "even") . ">" . "<td>" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["lastname"] . " " . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["firstname"] . "</td>" . "<td class=\"right\">" . number_format($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["telephone"], 0, ".", " ") . "</td>" . '<td class="center w20"><a class="delete ajax" href="' . $_SERVER["REQUEST_URI"] . '&ajaxAction=deleteCustomer&customer=' . htmlspecialchars($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['customer_id']) . '&firstname=' . htmlspecialchars($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['firstname']) . '&lastname=' . htmlspecialchars($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952['lastname']) . '&letter=' . htmlspecialchars($i05355412b857f5174e9a2f71b1e936a86ad60cd2b584f54a0be935f7ee8332f9a65155eb2870a7be) . '"><img src="' . self::$adminDelete . '"/></a></td>' . "</tr>"; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "</table>"; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<strong>" . v_smsmarketing_customersfound . " 0</strong>"; } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } private function fb9e19de745653a5a6dc1099f180d9c8d277f4d0c($i2649b9597db10189fdaf013de24c6ec5e8949dab = true) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; if($i2649b9597db10189fdaf013de24c6ec5e8949dab) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <form name="saveFilter" action="" method="post" class="ajax hoverForm"> <table> <tr> <td>' . v_filter_name . ': ' . self::getInput(array("name" => "saveName", "type" => "text")) . ' ' . self::getInput(array("name" => "saveFilter", "type" => "submit", "value" => v_filter_save, "onclick" => "showPopup();")) . ' </td> </tr> </table> </form> </br> <h2>' . v_filter_load . '</h2> '; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_marketing_filter` ORDER BY date DESC"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<table class=\"resultTable\"> <thead> <tr> <th>" . v_filter_name . "</th> <th>" . v_filter_date . "</th> <th></th> </tr> </thead> <tbody> "; foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= " <tr " . self::isEven($i05355412b857f5174e9a2f71b1e936a86ad60cd2f3b517d335a2b4ef26a37d2656c41c234b2a734a, "even") . "> <td><a href=\"" . $this->smsLinkRestoreFilter($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["id"]) . "\" class=\"ajax\" onclick=\"showPopup();\">" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["name"] . "</a></td> <td class=\"w150\">" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["date"] . "</td> <td class=\"w20\"><a href=\"" . $this->smsLinkDeleteFilter($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["id"]) . "\" class=\"ajax\" data-confirm=\"" . v_filter_q_delete . "\"><img src=\"" . self::$adminDelete . "\" /></a></td> </tr>"; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "</tbody></table>"; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getNote(v_filter_not_found); } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } private function f473f9812f802efbdb2dc40177774120ea42ffde3($i2649b9597db10189fdaf013de24c6ec5e8949dab = true) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 = ""; if($i2649b9597db10189fdaf013de24c6ec5e8949dab) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= ' <form name="saveFilter" action="" method="post" class="ajax hoverForm"> <table> <tr> <td>' . v_template_name . ': ' . self::getInput(array("name" => "saveName", "type" => "text")) . ' ' . self::getInput(array("name" => "saveText", "id" => "smsSaveTemplate", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveUnicode", "id" => "smsSaveTemplateUnicode", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveUnique", "id" => "smsSaveTemplateUnique", "type" => "hidden")) . ' ' . self::getInput(array("name" => "saveTemplate", "type" => "submit", "value" => v_template_save, "onclick" => "showPopup();")) . ' <script type="text/javascript"> jQuery("#smsSaveTemplate").val(jQuery("#smsText").val()); jQuery("#smsSaveTemplateUnicode").val(jQuery("#unicode").is(":checked")); jQuery("#smsSaveTemplateUnique").val(jQuery("#unique").is(":checked")); </script> </td> </tr> </table> </form> </br> <h2>' . v_template_load . '</h2> '; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de = $this->Execute("SELECT * FROM `" . DB_PREFIX . "sp_template` WHERE type = 0 ORDER BY date DESC"); if($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->num_rows) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "<table class=\"resultTable\"> <thead> <tr> <th>" . v_template_name . "</th> <th>" . v_filter_date . "</th> <th></th> </tr> </thead> <tbody> "; foreach($i05355412b857f5174e9a2f71b1e936a86ad60cd2c6e936002fe51b97bc1b95f337c09606ceb011de->rows as $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952) { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= " <tr " . self::isEven($i05355412b857f5174e9a2f71b1e936a86ad60cd2f3b517d335a2b4ef26a37d2656c41c234b2a734a, "even") . "> <td><a href=\"" . $this->smsLinkRestoreMarketingTemplate($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["id"]). "\" class=\"ajax\" onclick=\"showPopup();\">" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["name"] . "</a></td> <td class=\"w150\">" . $i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["date"] . "</td> <td class=\"w20\"><a href=\"" . $this->smsLinkDeleteMarketingTemplate($i05355412b857f5174e9a2f71b1e936a86ad60cd243ef5aef4168652439ef5de195405ced9f0f7952["id"])."\" class=\"ajax\" data-confirm=\"" . v_template_q_delete . "\"><img src=\"" . self::$adminDelete . "\" /></a></td> </tr>"; } $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= "</tbody></table>"; } else { $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8 .= self::getNote(v_template_not_found); } return $i05355412b857f5174e9a2f71b1e936a86ad60cd2ae8c74e5273dec25096dbae362493a9f609ecfc8; } } 